<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="Small-batch jams and fresh-baked cookies from Monterey Bay. Food with personality by Liz Hayes.">
  <title>Flavors With Liz | Food With Personality</title>
  <style>
    :root{
      --gold:#d4a017;
      --ink:#111;
      --muted:#666;
      --bg:#fff;
      --bg-soft:#fff8ec;
      --border:#eee;
      --radius: 12px;
      --transition: all 0.3s ease;
    }
    *{box-sizing:border-box}
    body { 
      margin:0; 
      font-family:"Segoe UI",system-ui,-apple-system,sans-serif; 
      color:var(--ink); 
      background:var(--bg); 
      line-height: 1.6;
    }

    /* Banner (logo background) */
    .banner{
      background: linear-gradient(to bottom, rgba(0,0,0,.38), rgba(0,0,0,.38)), url('images/logo-bg.jpg') center/cover no-repeat;
      color:#fff;
    }
    header{ 
      padding:1rem 2rem; 
      display:flex; 
      justify-content:space-between; 
      align-items:center; 
      position: relative;
    }
    .brand{ display:flex; align-items:center; gap:.6rem; }
    .brand-mark{ width:40px;height:40px;border-radius:999px;background:rgba(255,255,255,.9); display:grid;place-items:center;color:#000;font-weight:900;border:2px solid rgba(0,0,0,.06); }
    .brand h1{ margin:0; font-size:1.1rem; letter-spacing:.3px }
    
    /* Navigation */
    nav { display: flex; align-items: center; }
    nav a{ color:#fff; margin-left:1.5rem; text-decoration:none; font-weight:700; transition: var(--transition); }
    nav a:hover{text-decoration:underline; color: var(--gold);}
    
    /* Mobile menu button */
    .menu-toggle {
      display: none;
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0.5rem;
    }
    
    /* Hero section */
    .hero{ padding:3.6rem 2rem 4.6rem; text-align:center; }
    .hero h1{ font-size:clamp(2.2rem,3.5vw,3.2rem); margin:.2rem 0 .5rem; line-height: 1.2; }
    .hero p{ max-width:720px; margin:0 auto 1.2rem; color:#f2f2f2; font-size: 1.1rem; }
    .btn{ 
      background:#fff; 
      color:#000; 
      padding:.8rem 1.5rem; 
      border-radius:10px; 
      text-decoration:none; 
      font-weight:800; 
      display:inline-block;
      transition: var(--transition);
      border: 2px solid transparent;
    }
    .btn:hover {
      background: var(--gold);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    /* Sections */
    section{ padding:3.5rem 2rem; max-width:1100px; margin:auto; }
    h2{ 
      font-family:Georgia,serif; 
      font-size:clamp(1.6rem,2.5vw,2.2rem); 
      margin-bottom:.75rem;
      position: relative;
      display: inline-block;
    }
    h2:after {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 0;
      width: 60px;
      height: 3px;
      background: var(--gold);
    }
    p.lead{ color:var(--muted); max-width:800px; font-size: 1.1rem; }
    ul{ line-height:1.8; color:#555; padding-left:1.1rem }
    .sep{ height:1px; background:var(--border); margin:2rem 0 }
    .gold{ color:var(--gold) }

    /* Grid */
    .grid{ display:grid; grid-template-columns:repeat(1,minmax(0,1fr)); gap:1.5rem }
    @media(min-width:600px){ .grid{ grid-template-columns:repeat(2,minmax(0,1fr)); gap:1.5rem } }
    @media(min-width:900px){ .grid{ grid-template-columns:repeat(3,minmax(0,1fr)); gap:1.5rem } }
    .card{ 
      border:1px solid var(--border); 
      border-radius:var(--radius); 
      overflow:hidden; 
      background:#fff; 
      transition:var(--transition); 
      display:flex; 
      flex-direction: column;
      height: 100%;
    }
    .card:hover{ 
      box-shadow:0 8px 24px rgba(0,0,0,.1);
      transform: translateY(-5px);
    }
    .media{ aspect-ratio:4/3; width:100%; background:#fafafa; display:grid; place-items:center; overflow:hidden }
    .media.square{ aspect-ratio:1/1 }
    .media img{ width:100%; height:100%; object-fit:cover; display:block; transition: var(--transition); }
    .card:hover .media img {
      transform: scale(1.05);
    }
    .body{ padding:1.2rem 1.2rem 1.4rem; flex:1; display: flex; flex-direction: column; }
    .title{ font-weight:700; margin:0 0 .25rem; font-size: 1.1rem; }
    .desc{ color:var(--muted); font-size:.95rem; margin:.25rem 0 .6rem; flex-grow: 1; }
    .price{ font-weight:800; font-size: 1.1rem; }
    .pill{ background:#fff3d1; color:#7a5b05; padding:.15rem .5rem; border-radius:999px; font-size:.75rem; font-weight:700 }
    .row{ display:flex; align-items:center; gap:.6rem; margin-top: auto; }
    .row .spacer{ flex:1 }
    .addbtn{ 
      background:var(--ink); 
      color:#fff; 
      padding:.6rem 1rem; 
      border:none; 
      border-radius:8px; 
      cursor:pointer; 
      font-weight:700; 
      font-size:.9rem;
      transition: var(--transition);
    }
    .addbtn:hover {
      background: var(--gold);
      transform: scale(1.05);
    }

    /* About */
    .about-wrap{ display:grid; gap:2rem }
    @media(min-width:900px){ .about-wrap{ grid-template-columns:1fr 1.2fr; align-items: center; } }
    .about-photo{ border:1px solid var(--border); border-radius:18px; overflow:hidden; background:#fafafa; aspect-ratio:4/3; display:grid; place-items:center }
    .about-photo img{ width:100%; height:100%; object-fit:cover; display:block }

    /* Cart */
    .cartbar{ 
      position:fixed; 
      right:1rem; 
      bottom:1rem; 
      background:#000; 
      color:#fff; 
      border-radius:12px; 
      padding:.8rem 1.2rem; 
      font-weight:800; 
      cursor:pointer; 
      z-index:50; 
      box-shadow:0 8px 24px rgba(0,0,0,.2);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: var(--transition);
    }
    .cartbar:hover {
      background: var(--gold);
      transform: scale(1.05);
    }
    .cart-panel{ 
      position:fixed; 
      inset:0; 
      background:rgba(0,0,0,.45); 
      display:none; 
      align-items:center; 
      justify-content:center; 
      padding:1rem; 
      z-index:60;
      backdrop-filter: blur(4px);
    }
    .cart-panel.open{ display:flex }
    .cart-inner{ 
      background:#fff; 
      border-radius:18px; 
      max-width:560px; 
      width:100%; 
      max-height: 90vh;
      overflow:hidden; 
      box-shadow:0 24px 64px rgba(0,0,0,.25);
      display: flex;
      flex-direction: column;
    }
    .cart-head{ display:flex; justify-content:space-between; align-items:center; padding:1.2rem 1.5rem; border-bottom:1px solid var(--border) }
    .cart-body{ max-height:60vh; overflow:auto; padding:1rem 1.5rem; flex-grow: 1; }
    .cart-item{ display:flex; gap:.75rem; align-items:center; padding:.75rem 0; border-bottom:1px dashed #eee }
    .cart-item:last-child{ border-bottom:none }
    .cart-foot{ padding:1.2rem 1.5rem; border-top:1px solid var(--border) }
    .qbtn{ 
      border:1px solid #ddd; 
      border-radius:8px; 
      padding:.3rem .7rem; 
      cursor:pointer; 
      background:#fff;
      transition: var(--transition);
      font-weight: bold;
    }
    .qbtn:hover {
      background: var(--gold);
      color: white;
      border-color: var(--gold);
    }
    .checkout{ 
      background:var(--ink); 
      color:#fff; 
      border:none; 
      border-radius:10px; 
      padding:.8rem 1rem; 
      font-weight:800; 
      cursor:pointer; 
      width:100%;
      transition: var(--transition);
      font-size: 1rem;
    }
    .checkout:hover {
      background: var(--gold);
      transform: translateY(-2px);
    }
    .clear{ 
      background:#f6f6f6; 
      border:none; 
      border-radius:10px; 
      padding:.6rem 1rem; 
      font-weight:700; 
      margin-top:.5rem; 
      width:100%; 
      cursor:pointer;
      transition: var(--transition);
    }
    .clear:hover {
      background: #e6e6e6;
    }

    /* Form Styling */
    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-top: 1.5rem;
    }
    label {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }
    input, textarea {
      padding: 0.75rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-family: inherit;
      font-size: 1rem;
      transition: var(--transition);
    }
    input:focus, textarea:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(212, 160, 23, 0.1);
    }
    form button[type="submit"] {
      background: var(--ink);
      color: white;
      border: none;
      border-radius: var(--radius);
      padding: 0.8rem 1.5rem;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      font-size: 1rem;
    }
    form button[type="submit"]:hover {
      background: var(--gold);
      transform: translateY(-2px);
    }

    /* Centered closing sections */
    .centered{ text-align:center }
    .centered h2:after {
      left: 50%;
      transform: translateX(-50%);
    }
    .centered ul{ list-style:none; padding:0 }
    .centered li{ margin:.5rem 0; color:#555 }
    .social{ display:flex; justify-content:center; align-items:center; gap:.6rem; margin-top:1.5rem; }
    .ig{ width:20px; height:20px; display:inline-block; vertical-align:middle; transition: var(--transition); }
    .social a:hover .ig {
      transform: scale(1.2);
    }

    footer{ background:#111; color:#eee; text-align:center; padding:2.5rem; font-size:.9rem; margin-top:3rem }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      header {
        padding: 1rem;
      }
      
      .menu-toggle {
        display: block;
      }
      
      nav {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: rgba(0,0,0,0.9);
        flex-direction: column;
        padding: 1rem;
        gap: 1rem;
        transform: translateY(-10px);
        opacity: 0;
        visibility: hidden;
        transition: var(--transition);
      }
      
      nav.open {
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
      }
      
      nav a {
        margin-left: 0;
        padding: 0.5rem 0;
        width: 100%;
        text-align: center;
        border-bottom: 1px solid rgba(255,255,255,0.1);
      }
      
      nav a:last-child {
        border-bottom: none;
      }
      
      section {
        padding: 2.5rem 1rem;
      }
      
      .hero {
        padding: 2.5rem 1rem 3.5rem;
      }
      
      .cart-inner {
        max-width: 95%;
      }
    }

    /* Loading animation for gallery */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(212, 160, 23, 0.3);
      border-radius: 50%;
      border-top-color: var(--gold);
      animation: spin 1s ease-in-out infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>

  <!-- Banner with background image and nav -->
  <div class="banner">
    <header>
      <div class="brand">
        <div class="brand-mark">FL</div>
        <div>
          <h1>Flavors With Liz</h1>
          <div style="font-size:.8rem;opacity:.85">Food With Personality</div>
        </div>
      </div>
      <button class="menu-toggle" aria-label="Toggle menu">☰</button>
      <nav id="mainNav">
        <a href="#about">About</a>
        <a href="#jams">Jams</a>
        <a href="#cookies">Cookies</a>
        <a href="#gallery">Gallery</a>
        <a href="#custom">Custom</a>
        <a href="#contact">Contact</a>
      </nav>
    </header>
    <div class="hero">
      <h1>Small-Batch <span class="gold">Jams</span> & Fresh-Baked <span class="gold">Cookies</span></h1>
      <p>Naturally vibrant flavors made in Monterey Bay. Ship nationwide or schedule local pickup.</p>
      <a href="#jams" class="btn">Shop the Menu</a>
    </div>
  </div>

  <!-- About -->
  <section id="about">
    <h2>About Liz</h2>
    <div class="about-wrap">
      <div class="about-photo">
        <img src="images/liz.jpg" alt="Liz Hayes portrait" onerror="this.src='https://picsum.photos/seed/liz/1200/900'">
      </div>
      <div>
        <p class="lead">Hi, I'm Liz — a self-taught chef and small-batch maker. Every jar and cookie is crafted in tiny batches so flavor stays bright, textures stay perfect, and you can feel the care that went into it.</p>
        <ul>
          <li>Locally sourced fruit when in season</li>
          <li>No artificial colors or preservatives</li>
          <li>Packed and shipped with care from Monterey Bay</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Jams -->
  <section id="jams">
    <h2>Jams</h2>
    <p class="lead">Spread-worthy jars cooked low and slow.</p>
    <div class="grid">
      <article class="card" data-id="jam-strawberry" data-name="Small-Batch Strawberry Jam" data-price="9.5" data-type="Jam">
        <div class="media">
          <img src="images/jam-strawberry.jpg" alt="Small-Batch Strawberry Jam" onerror="this.src='https://picsum.photos/seed/strawberry/800/600';">
        </div>
        <div class="body">
          <div class="row">
            <div class="title">Small-Batch Strawberry Jam <span class="pill">Bestseller</span></div>
          </div>
          <p class="desc">Sun-ripened berries, lemon, and a hint of vanilla.</p>
          <div class="row">
            <div class="price">$9.50</div>
            <div class="spacer"></div>
            <button class="addbtn" aria-label="Add Small-Batch Strawberry Jam to cart">Add to Order</button>
          </div>
        </div>
      </article>

      <article class="card" data-id="jam-peach" data-name="Vanilla Peach Jam" data-price="10" data-type="Jam">
        <div class="media">
          <img src="images/jam-peach.jpg" alt="Vanilla Peach Jam" onerror="this.src='https://picsum.photos/seed/peach/800/600';">
        </div>
        <div class="body">
          <div class="title">Vanilla Peach Jam</div>
          <p class="desc">Golden peaches slow-cooked with Madagascar vanilla.</p>
          <div class="row">
            <div class="price">$10.00</div>
            <div class="spacer"></div>
            <button class="addbtn" aria-label="Add Vanilla Peach Jam to cart">Add to Order</button>
          </div>
        </div>
      </article>

      <article class="card" data-id="jam-blueberry" data-name="Blueberry + Lemon Zest Jam" data-price="10.5" data-type="Jam">
        <div class="media">
          <img src="images/jam-blueberry.jpg" alt="Blueberry + Lemon Zest Jam" onerror="this.src='https://picsum.photos/seed/blueberry/800/600';">
        </div>
        <div class="body">
          <div class="title">Blueberry + Lemon Zest Jam</div>
          <p class="desc">Bright citrus lifts juicy wild blueberries.</p>
          <div class="row">
            <div class="price">$10.50</div>
            <div class="spacer"></div>
            <button class="addbtn" aria-label="Add Blueberry + Lemon Zest Jam to cart">Add to Order</button>
          </div>
        </div>
      </article>
    </div>
  </section>

  <div class="sep"></div>

  <!-- Cookies -->
  <section id="cookies">
    <h2>Cookies</h2>
    <p class="lead">Baked to order.</p>
    <div class="grid">
      <article class="card" data-id="cookie-choc" data-name="Salted Chocolate Chunk (6)" data-price="14" data-type="Cookie">
        <div class="media square">
          <img src="images/cookie-choc.jpg" alt="Salted Chocolate Chunk Cookies" onerror="this.src='https://picsum.photos/seed/choc/1200/1200';">
        </div>
        <div class="body">
          <div class="row">
            <div class="title">Salted Chocolate Chunk (6) <span class="pill">New</span></div>
          </div>
          <p class="desc">Crisp edges, gooey center, sea salt finish.</p>
          <div class="row">
            <div class="price">$14.00</div>
            <div class="spacer"></div>
            <button class="addbtn" aria-label="Add Salted Chocolate Chunk Cookies to cart">Add to Order</button>
          </div>
        </div>
      </article>

      <article class="card" data-id="cookie-oat" data-name="Brown Butter Oatmeal Raisin (6)" data-price="13" data-type="Cookie">
        <div class="media square">
          <img src="images/cookie-oat.jpg" alt="Brown Butter Oatmeal Raisin" onerror="this.src='https://picsum.photos/seed/oat/1200/1200';">
        </div>
        <div class="body">
          <div class="title">Brown Butter Oatmeal Raisin (6)</div>
          <p class="desc">Toasty oats, plump raisins, cinnamon.</p>
          <div class="row">
            <div class="price">$13.00</div>
            <div class="spacer"></div>
            <button class="addbtn" aria-label="Add Brown Butter Oatmeal Raisin Cookies to cart">Add to Order</button>
          </div>
        </div>
      </article>

      <article class="card" data-id="cookie-lemon" data-name="Lemon Sugar Cookies (6)" data-price="12.5" data-type="Cookie">
        <div class="media square">
          <img src="images/cookie-lemon.jpg" alt="Lemon Sugar Cookies" onerror="this.src='https://picsum.photos/seed/lemon/1200/1200';">
        </div>
        <div class="body">
          <div class="title">Lemon Sugar Cookies (6)</div>
          <p class="desc">Bright lemon glaze, tender crumb.</p>
          <div class="row">
            <div class="price">$12.50</div>
            <div class="spacer"></div>
            <button class="addbtn" aria-label="Add Lemon Sugar Cookies to cart">Add to Order</button>
          </div>
        </div>
      </article>
    </div>
  </section>

  <div class="sep"></div>

  <!-- Gallery (loads from photos.json) -->
  <section id="gallery">
    <h2>Gallery</h2>
    <p class="lead">These photos load from <code>photos.json</code>. Replace the image URLs there and they'll appear here automatically.</p>
    <div class="grid" id="galleryGrid">
      <div style="text-align: center; grid-column: 1 / -1; padding: 2rem;">
        <div class="loading"></div>
        <p>Loading gallery...</p>
      </div>
    </div>
  </section>

  <div class="sep"></div>

  <!-- Custom Orders (centered) -->
  <section id="custom" class="centered">
    <h2>Custom Orders</h2>
    <p class="lead">Dessert tables, favor jars, and seasonal cookie boxes. Share details and I'll reply within 24 hours.</p>
    <ul>
      <li>Weddings, showers, birthdays, corporate gifts</li>
      <li>Flavor matching and tasting boxes available</li>
      <li>Local pickup in Monterey Bay; limited delivery</li>
    </ul>
  </section>

  <!-- Contact (centered + Instagram) -->
  <section id="contact" class="centered">
    <h2>Contact Liz</h2>
    <form action="https://formspree.io/f/yourformid" method="POST">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" required />
      
      <label for="email">Email:</label>
      <input type="email" id="email" name="_replyto" required />
      
      <label for="message">Message:</label>
      <textarea id="message" name="message" rows="5" placeholder="Tell me about your order, event, or flavor ideas..." required></textarea>
      
      <button type="submit">Send Message</button>
    </form>
    <div class="social">
      <!-- Inline SVG Instagram icon -->
      <a href="https://instagram.com/FlavorsWithLiz" target="_blank" rel="noopener" style="display: flex; align-items: center; gap: 0.5rem; font-weight:700;text-decoration:none;color:var(--ink)">
        <svg class="ig" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="5" ry="5"></rect>
          <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
          <line x1="17.5" y1="6.5" x2="17.5" y2="6.5"></line>
        </svg>
        @FlavorsWithLiz
      </a>
    </div>
    <p style="margin-top:.6rem;color:#555">Prefer email? <a href="mailto:FlavorsWithLiz@gmail.com">FlavorsWithLiz@gmail.com</a></p>
  </section>

  <!-- Floating Cart Button -->
  <div class="cartbar" id="cartToggle">
    <span>Cart</span>
    <span id="cartCount">0</span>
  </div>

  <!-- Cart Panel -->
  <div class="cart-panel" id="cartPanel">
    <div class="cart-inner">
      <div class="cart-head">
        <strong>Your Order</strong>
        <button class="qbtn" onclick="toggleCart(false)" aria-label="Close cart">Close</button>
      </div>
      <div class="cart-body" id="cartBody"></div>
      <div class="cart-foot">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:.6rem">
          <div>Subtotal</div><div id="cartSubtotal" style="font-weight:800">$0.00</div>
        </div>
        <button class="checkout" onclick="checkout()">Checkout</button>
        <button class="clear" onclick="clearCart()">Clear Cart</button>
      </div>
    </div>
  </div>

  <footer>
    <p>© <span id="year"></span> Flavors With Liz — Food With Personality</p>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // Mobile menu toggle
    const menuToggle = document.querySelector('.menu-toggle');
    const mainNav = document.getElementById('mainNav');
    
    menuToggle.addEventListener('click', () => {
      mainNav.classList.toggle('open');
    });
    
    // Close mobile menu when clicking on a link
    document.querySelectorAll('nav a').forEach(link => {
      link.addEventListener('click', () => {
        mainNav.classList.remove('open');
      });
    });

    // --- Gallery: load your real photos from photos.json ---
    fetch('photos.json')
      .then(r => r.json())
      .then(list => {
        const grid = document.getElementById('galleryGrid');
        if (list && list.length > 0) {
          grid.innerHTML = list.map(url => `
            <article class="card">
              <div class="media">
                <img src="${url}" alt="Flavors With Liz gallery photo" onerror="this.src='https://picsum.photos/seed/fwl'+Math.random()+'/800/600'">
              </div>
            </article>
          `).join('');
        } else {
          grid.innerHTML = '<p style="color:#666; grid-column: 1 / -1; text-align: center;">Add image URLs to <code>photos.json</code> to show your gallery.</p>';
        }
      })
      .catch(() => {
        document.getElementById('galleryGrid').innerHTML =
          '<p style="color:#666; grid-column: 1 / -1; text-align: center;">Add image URLs to <code>photos.json</code> to show your gallery.</p>';
      });

    // --- Cart Logic (localStorage) ---
    const cartKey = 'flavorsWithLizCart';
    const cart = JSON.parse(localStorage.getItem(cartKey) || '[]');

    function format(n){ return '$' + n.toFixed(2); }
    function saveCart(){ 
      localStorage.setItem(cartKey, JSON.stringify(cart)); 
      renderCart(); 
    }
    
    function addToCart(item){ 
      const f = cart.find(i => i.id === item.id); 
      if(f){ 
        f.qty += 1; 
      } else { 
        cart.push({...item, qty:1}); 
      } 
      saveCart(); 
      
      // Show feedback
      showCartFeedback(`${item.name} added to cart!`);
    }
    
    function increment(id){ 
      const it = cart.find(i => i.id===id); 
      if(it){ 
        it.qty++; 
        saveCart(); 
      } 
    }
    
    function decrement(id){ 
      const idx = cart.findIndex(i => i.id===id); 
      if(idx>-1){ 
        cart[idx].qty--; 
        if(cart[idx].qty<=0) cart.splice(idx,1); 
        saveCart(); 
      } 
    }
    
    function clearCart(){ 
      cart.splice(0, cart.length); 
      saveCart(); 
      showCartFeedback('Cart cleared');
    }
    
    function showCartFeedback(message) {
      // Create feedback element
      const feedback = document.createElement('div');
      feedback.textContent = message;
      feedback.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--gold);
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        font-weight: 600;
        box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        z-index: 100;
        transform: translateX(100%);
        transition: transform 0.3s ease;
      `;
      
      document.body.appendChild(feedback);
      
      // Animate in
      setTimeout(() => {
        feedback.style.transform = 'translateX(0)';
      }, 10);
      
      // Animate out and remove
      setTimeout(() => {
        feedback.style.transform = 'translateX(100%)';
        setTimeout(() => {
          document.body.removeChild(feedback);
        }, 300);
      }, 3000);
    }

    function renderCart(){
      const body = document.getElementById('cartBody');
      const count = cart.reduce((a,i)=>a+i.qty,0);
      document.getElementById('cartCount').textContent = count;
      
      // Update cart button text based on count
      const cartToggle = document.getElementById('cartToggle');
      if (count === 0) {
        cartToggle.innerHTML = '<span>Cart</span> <span id="cartCount">0</span>';
      } else {
        cartToggle.innerHTML = `<span>Cart</span> <span id="cartCount">${count}</span>`;
      }
      
      if(cart.length===0){
        body.innerHTML = '<p style="color:#666; text-align: center; padding: 2rem;">Your cart is empty.</p>';
        document.getElementById('cartSubtotal').textContent = '$0.00';
        return;
      }
      body.innerHTML = cart.map(i => `
        <div class="cart-item">
          <div style="width:52px;height:52px;border-radius:10px;background:#f5f5f5;display:grid;place-items:center;overflow:hidden">
            <img src="${i.img||''}" onerror="this.src='https://picsum.photos/seed/${i.id}/100/100'" style="width:100%;height:100%;object-fit:cover" alt="${i.name}">
          </div>
          <div style="flex:1">
            <div style="font-weight:700">${i.name}</div>
            <div style="color:#666;font-size:.9rem">${format(i.price)}</div>
          </div>
          <div style="display:flex;align-items:center;gap:.4rem">
            <button class="qbtn" onclick="decrement('${i.id}')" aria-label="Decrease quantity">-</button>
            <div style="min-width:24px;text-align:center">${i.qty}</div>
            <button class="qbtn" onclick="increment('${i.id}')" aria-label="Increase quantity">+</button>
          </div>
        </div>
      `).join('');
      const subtotal = cart.reduce((a,i)=>a+i.price*i.qty,0);
      document.getElementById('cartSubtotal').textContent = format(subtotal);
    }

    function checkout() {
      if (cart.length === 0) {
        alert('Your cart is empty. Add some items before checking out.');
        return;
      }
      
      // In a real implementation, this would redirect to a payment processor
      alert('Demo checkout — connect Stripe or Square when ready!\n\n' + 
            cart.map(item => `${item.name} x${item.qty} - ${format(item.price * item.qty)}`).join('\n') +
            `\n\nTotal: ${format(cart.reduce((a,i)=>a+i.price*i.qty,0))}`);
    }

    // Add to cart buttons
    document.querySelectorAll('.card').forEach(card => {
      const btn = card.querySelector('.addbtn'); 
      if(!btn) return;
      
      btn.addEventListener('click', () => {
        const item = {
          id: card.dataset.id,
          name: card.dataset.name,
          price: parseFloat(card.dataset.price),
          type: card.dataset.type,
          img: card.querySelector('img')?.getAttribute('src') || ''
        };
        addToCart(item);
        toggleCart(true);
      });
    });

    // Cart panel toggle
    const cartPanel = document.getElementById('cartPanel');
    document.getElementById('cartToggle').addEventListener('click', () => toggleCart(true));
    
    function toggleCart(open){ 
      cartPanel.classList[open ? 'add':'remove']('open'); 
      // Close mobile menu when opening cart
      if (open) {
        mainNav.classList.remove('open');
      }
    }
    
    cartPanel.addEventListener('click', (e) => { 
      if(e.target === cartPanel) toggleCart(false); 
    });

    // Initial render
    renderCart();
  </script>
</body>
</html>
